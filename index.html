<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>擎天云</title>
    <link rel="stylesheet" href="./styles/reset.css">
    <link rel="stylesheet" href="./styles/variable.css">
    <link rel="stylesheet" href="./asserts/swiper-bundle.min.css">
    <link rel="stylesheet" href="./asserts/iconfont/iconfont.css">
    <link rel="stylesheet" href="./asserts/animate.min.css">
</head>

<body>
    <img src="./images/fly.jpg" alt="">
    <div>哈哈哈</div>
    <exe-header></exe-header>
    <div id="main"></div>
    <exe-footer></exe-footer>
    <exe-back></exe-back>

    <script src="./layouts/index.js" type="module"></script>
    <script src="./views/index.js" type="module"></script>

    <!-- 路由跳转 -->
    <script>
        let mainElement = null

        document.querySelector('exe-header').addEventListener('navItemClick', (e) => {
            window.location.hash = e.detail.getAttribute('href')
            onHashChange()
        })

        const onHashChange = () => {
            if (location.hash === '') {
                window.location.hash = '#home'
            }
            switch (location.hash) {
                case '#case':
                    mainElement.innerHTML = '<page-case></page-case>'
                    break
                case '#about':
                    mainElement.innerHTML = '<page-about></page-about>'
                    break
                case '#news':
                    mainElement.innerHTML = '<exe-news></exe-news>'
                    break
                case '#skill':
                    mainElement.innerHTML = '<page-skill></page-skill>'
                    this.dispatchEvent(new CustomEvent('more', { detail: location.hash }))
                    break
                case '#home':
                case '':
                    mainElement.innerHTML = '<page-home></page-home>'
            }


        }

        const onLoad = () => {
            mainElement = document.getElementById('main')
            onHashChange()
        }

        window.addEventListener('DOMContentLoaded', onLoad)
        window.addEventListener('hashchange', onHashChange)
    </script>
    <script>
        window.addEventListener('scroll', () => {
            const scrollTop = document.documentElement.scrollTop || document.body.scrollTop
            document.querySelector('exe-header').dispatchEvent(new CustomEvent('scroll', { detail: { scrollTop } }))
        })

        window.addEventListener('scroll', function () {
            let scroll = document.documentElement.scrollTop || document.body.scrollTop
            // 注册事件并派发事件
            const evt = new CustomEvent('back', { detail: scroll })
            document.querySelector('exe-back').dispatchEvent(evt)
        })

    </script>
    
    
</body>

</html>
